# In Memory Join
`对于性能（大表，多表join等）及服务化（服务自治，分库分表等）的考虑，使用（服务）内存join是一个更具扩展性和适应性的选择`

一般逻辑

1. 查询到所有主体数据后对每个关联属性串行装载并循环处理整个集合
2. 查询到所有主体数据后，聚合关联属性，串行查询所有关联数据，通过map映射状态数据
3. 查询到所有主体数据后，聚合关联属性，并行查询所有关联数据，通过map映射状态数据

注解抽象

- 通过注解配置，模版方法统一"不变"的流程减少硬编码的实现，spring解析EL并调用的能力，完成对数据的装载
- 客户端不需要在加载数据方法中因新的关联数据而打破开闭原则等

核心

- 模版方法
- 查询全部数据后再串/并行查询其关联数据后组装，与DB仅做有限次交互，连接次数不受数据量变化而影响，受数据对象定义的关联属性数量影响
- Spring支持的表达式解析，如在Spring Security中的@PreAuthorize("hasRole('')")
- 工厂

架构

